# ============================================================================
# AL-Tool API - Arquivo de Exemplo
# ============================================================================
# Copie para apps/api/.env e ajuste conforme necessário.
# Este arquivo é carregado diretamente pela API Express.
# ============================================================================

NODE_ENV=production

# Porta do servidor
APP_PORT=3000
PORT=3000

# Diretório de dados
DATA_DIR=/caminho/para/dados

# ============================================================================
# SQLITE
# ============================================================================

SQLITE_JOURNAL_MODE=WAL
SQLITE_SYNCHRONOUS=NORMAL
SQLITE_CACHE_SIZE=-100000
SQLITE_TEMP_STORE=MEMORY
SQLITE_BUSY_TIMEOUT=60000
SQLITE_FOREIGN_KEYS=ON
SQLITE_MMAP_SIZE=536870912

# ============================================================================
# INGESTÃO
# ============================================================================

INGEST_SAMPLE_ROWS=1500
INGEST_BATCH_SIZE=8000

# ============================================================================
# WORKERS (Polling)
# ============================================================================

WORKER_POLL_SECONDS=3
DERIVED_COLUMN_POLL_SECONDS=3
DERIVED_COLUMN_BATCH_SIZE=5000
DERIVED_COLUMN_DIRECT_UPDATE=true

# ============================================================================
# WORKER THREADS (Multithreading)
# ============================================================================

# Habilita/desabilita worker threads
WORKER_THREADS_ENABLED=true

# Número de workers no pool (padrão: CPUs - 1)
WORKER_POOL_SIZE=4

# Timeout por tarefa (ms)
WORKER_TASK_TIMEOUT=300000

# Logs detalhados
WORKER_DEBUG_LOGGING=false

# Thresholds (volume mínimo para usar workers)
WORKER_INGEST_THRESHOLD=1000
WORKER_CONCILIACAO_THRESHOLD=500
WORKER_ESTORNO_THRESHOLD=5000
WORKER_ATRIBUICAO_THRESHOLD=100

# Batch sizes
WORKER_INGEST_BATCH_SIZE=5000
WORKER_CONCILIACAO_BATCH_SIZE=1000
WORKER_ESTORNO_BATCH_SIZE=10000
WORKER_ATRIBUICAO_BATCH_SIZE=500

# ============================================================================
# API
# ============================================================================

CORS_ORIGIN=*
API_DEFAULT_PAGE_SIZE=50
API_MAX_PAGE_SIZE=300

# ============================================================================
# LICENCIAMENTO
# ============================================================================

LICENSE_API_BASE_URL=
LICENSE_API_SECRET=
